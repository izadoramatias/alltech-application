{% extends 'base.html.twig' %}
{% block title %}Novo Pedido{% endblock %}
{% block body %}
    <div class="bg-light min-vh-100">
        <div class="container-lg bg-light">
            <div class="row p-5">
                <div class="position-relative w-100">
                    <h3 class="fw-bolder text-center">Cadastro para recebimento de equipamento</h3>
                    <div class="position-absolute top-0 end-0">
                        <a class="text-light text-decoration-none" href="/home" methods="get">
                            <button class="btn btn-dark fw-semibold">
                                <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><style>svg{fill:#f0f0f0}</style><path d="M512 256A256 256 0 1 0 0 256a256 256 0 1 0 512 0zM231 127c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-71 71L376 232c13.3 0 24 10.7 24 24s-10.7 24-24 24l-182.1 0 71 71c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0L119 273c-9.4-9.4-9.4-24.6 0-33.9L231 127z"/></svg>
                                Voltar
                            </button>
                        </a>
                    </div>
                </div>
            </div>
            <div>
                <form class="row g-5 was-validated" action="{{ path('app_process_order_register_request') }}" method="post" novalidate>
                    <div class="col-md-6">
                        <label for="cep" class="form-label fw-semibold ">CEP</label>
                        <div class="input-group">
                            <span class="input-group-text">
                                <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 384 512"><style>svg{fill:#e4dede}</style><path d="M215.7 499.2C267 435 384 279.4 384 192C384 86 298 0 192 0S0 86 0 192c0 87.4 117 243 168.3 307.2c12.3 15.3 35.1 15.3 47.4 0zM192 128a64 64 0 1 1 0 128 64 64 0 1 1 0-128z"/></svg>
                            </span>
                            <input maxlength="16" name="cep" placeholder="CEP" type="text" class="form-control form-control-lg fs-6" id="cep" value="{{ cep }}" required>
                            <div class="invalid-feedback">Campo "CEP" não pode ser vazio</div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <label for="number" class="form-label fw-semibold">Número</label>
                        <div class="d-flex flex-column align-items-start ">
                            <div class="input-group mb-2">
                                <span class="input-group-text">
                                <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 384 512"><style>svg{fill:#e4dede}</style><path d="M215.7 499.2C267 435 384 279.4 384 192C384 86 298 0 192 0S0 86 0 192c0 87.4 117 243 168.3 307.2c12.3 15.3 35.1 15.3 47.4 0zM192 128a64 64 0 1 1 0 128 64 64 0 1 1 0-128z"/></svg>
                                </span>
                                <input maxlength="8" name="number" placeholder="Número" type="text" class="form-control form-control-lg fs-6" id="number" value="{{ number }}" required>
                                <div class="invalid-feedback">Campo "número" não pode ser vazio</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <label for="neighborhood" class="form-label fw-semibold">Bairro</label>
                        <div class="input-group">
                            <span class="input-group-text">
                                <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 384 512"><style>svg{fill:#e4dede}</style><path d="M215.7 499.2C267 435 384 279.4 384 192C384 86 298 0 192 0S0 86 0 192c0 87.4 117 243 168.3 307.2c12.3 15.3 35.1 15.3 47.4 0zM192 128a64 64 0 1 1 0 128 64 64 0 1 1 0-128z"/></svg>
                            </span>
                            <input maxlength="20" name="neighborhood" placeholder="Bairro" type="text" class="form-control form-control-lg fs-6" id="neighborhood" value="{{ neighborhood }}" required>
                            <div class="invalid-feedback">Campo "bairro" não pode ser vazio</div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <label for="equipment" class="form-label fw-semibold">Equipamento a receber:</label>
                        <div class="input-group">
                            <span class="input-group-text">
                                <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 384 512"><style>svg{fill:#e4dede}</style><path d="M215.7 499.2C267 435 384 279.4 384 192C384 86 298 0 192 0S0 86 0 192c0 87.4 117 243 168.3 307.2c12.3 15.3 35.1 15.3 47.4 0zM192 128a64 64 0 1 1 0 128 64 64 0 1 1 0-128z"/></svg>
                            </span>
                            <textarea maxlength="60" name="equipment" placeholder="Descreva qual tipo de equipamento precisa receber (ex: computador, notebook, mouse...)" class="form-control form-control-lg fs-6" id="equipment" required>{{ orderDescription }}</textarea>
                            <div class="invalid-feedback">Campo "equipamento a receber" não pode ser vazio</div>
                        </div>
                        <div class="characters-counter">
                            <p style="font-size: 14px;" class="text-black-50">Caracteres restantes: <span id="characters-left">60</span></p>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <label for="street" class="form-label fw-semibold">Rua</label>
                        <div class="input-group">
                            <span class="input-group-text">
                                <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 384 512"><style>svg{fill:#e4dede}</style><path d="M215.7 499.2C267 435 384 279.4 384 192C384 86 298 0 192 0S0 86 0 192c0 87.4 117 243 168.3 307.2c12.3 15.3 35.1 15.3 47.4 0zM192 128a64 64 0 1 1 0 128 64 64 0 1 1 0-128z"/></svg>
                            </span>
                            <input maxlength="20" name="street" placeholder="Rua" type="text" class="form-control form-control-lg fs-6" id="street" value="{{ street }}" required>
                            <div class="invalid-feedback">Campo "rua" não pode ser vazio</div>
                        </div>
                    </div>
                    <div class="d-flex align-items-center justify-content-center pt-5">
                        <button type="submit" class="btn btn-lg btn-danger px-5 text-center">Entrar</button>
                    </div>
                </form>
            </div>
            <div class="position-absolute end-0 bottom-0 me-4 mb-4">
                <img src="{{ asset('images/logo-fatec-black.svg') }}" alt="">
            </div>
        </div>
    </div>

    {% block javascripts %}
        <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>

        <script>
            (function ($) {
                let totalRemaining = parseInt($('#characters-left').text());
                $('#equipment').on('input', () => {
                    let totalEntered = $('#equipment').val().length;
                    let subtraction = totalRemaining - totalEntered;

                    $('#characters-left').text(subtraction)
                })
            }(jQuery));

        </script>
    {% endblock %}
{% endblock %}